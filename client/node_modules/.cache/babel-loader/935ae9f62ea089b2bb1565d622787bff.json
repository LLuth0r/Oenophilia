{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/home/pak/Documents/General_Assembly/Unit_4/P4/The-Cellar/client/src/containers/MainContainer.jsx\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport { useEffect, useState } from 'react';\nimport { Switch, Route, useHistory } from 'react-router-dom';\nimport CreateWine from '../screens/CreateWine/CreateWine';\nimport Wines from '../screens/Wines/Wines';\nimport WineDetail from '../screens/WineDetail/WineDetail';\nimport EditWine from '../screens/EditWine/EditWine';\nimport { getAllWines, postWine, putWine, deleteWine, getOneWine } from '../services/wines';\nexport default function MainContainer(props) {\n  _s();\n\n  const [wines, setWines] = useState([]); // const [vineyards, setVineyards] = useState([]);\n\n  const history = useHistory();\n  const {\n    currentUser\n  } = props;\n  useEffect(() => {\n    const fetchWines = async () => {\n      const wineData = await getAllWines();\n      setWines(wineData);\n    };\n\n    fetchWines();\n  }, []); // useEffect(() => {\n  //     const fetchVineyards = async () => {\n  //         const vineyardData = await getAllVineyards();\n  //         setVineyards(vineyardData);\n  //     }\n  //     fetchVineyards();\n  // }, []);\n\n  const handleCreate = async wineData => {\n    const newWine = await postWine(wineData);\n    setWines(prevState => [...prevState, newWine]);\n    history.push('/user');\n  };\n\n  const handleDelete = async id => {\n    await deleteWine(id);\n    setWines(prevState => prevState.filter(wineItem => {\n      return wineItem.id !== id;\n    }));\n  };\n\n  const handleUpdate = async (id, wineData) => {\n    const updatedWine = await putWine(id, wineData);\n    setWines(prevState => prevState.map(wineItem => {\n      return wineItem.id === Number(id) ? updatedWine : wineItem;\n    }));\n    history.push('/user');\n  };\n\n  return /*#__PURE__*/_jsxDEV(Switch, {\n    children: [/*#__PURE__*/_jsxDEV(Route, {\n      path: \"/wines\",\n      children: /*#__PURE__*/_jsxDEV(Wines, {\n        wines: wines\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 16\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 12\n    }, this), /*#__PURE__*/_jsxDEV(Route, {\n      path: \"/wines/:id/edit\",\n      children: /*#__PURE__*/_jsxDEV(EditWine, {\n        wines: wines,\n        handleUpdate: handleUpdate\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 16\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 12\n    }, this), /*#__PURE__*/_jsxDEV(Route, {\n      path: \"/wines/:id\",\n      children: /*#__PURE__*/_jsxDEV(WineDetail, {\n        wines: wines\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 16\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 12\n    }, this), /*#__PURE__*/_jsxDEV(Route, {\n      path: \"/wines/new\",\n      children: /*#__PURE__*/_jsxDEV(CreateWine, {\n        handleCreate: handleCreate\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 16\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 12\n    }, this), /*#__PURE__*/_jsxDEV(Route, {\n      path: \"/user\",\n      children: /*#__PURE__*/_jsxDEV(ProfilePage, {\n        wines: wines,\n        handleDelete: handleDelete,\n        currentUser: currentUser\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 16\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 12\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 55,\n    columnNumber: 8\n  }, this);\n}\n\n_s(MainContainer, \"0vvwasJVKJ/fMHy5zsBcOrezcOk=\", false, function () {\n  return [useHistory];\n});\n\n_c = MainContainer;\n\nvar _c;\n\n$RefreshReg$(_c, \"MainContainer\");","map":{"version":3,"sources":["/home/pak/Documents/General_Assembly/Unit_4/P4/The-Cellar/client/src/containers/MainContainer.jsx"],"names":["React","useEffect","useState","Switch","Route","useHistory","CreateWine","Wines","WineDetail","EditWine","getAllWines","postWine","putWine","deleteWine","getOneWine","MainContainer","props","wines","setWines","history","currentUser","fetchWines","wineData","handleCreate","newWine","prevState","push","handleDelete","id","filter","wineItem","handleUpdate","updatedWine","map","Number"],"mappings":"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","sourcesContent":["import React from 'react'\nimport {useEffect, useState} from 'react';\nimport {Switch, Route, useHistory} from 'react-router-dom';\nimport CreateWine from '../screens/CreateWine/CreateWine';\nimport Wines from '../screens/Wines/Wines';\nimport WineDetail from '../screens/WineDetail/WineDetail';\nimport EditWine from '../screens/EditWine/EditWine';\nimport {getAllWines, postWine, putWine, deleteWine, getOneWine } from '../services/wines';\n\n\nexport default function MainContainer(props) {\n    const [wines, setWines] = useState([]);\n    // const [vineyards, setVineyards] = useState([]);\n    const history = useHistory();\n    const {currentUser} = props;\n\n    useEffect(() => {\n        const fetchWines = async () => {\n            const wineData = await getAllWines();\n            setWines(wineData)\n        }\n        fetchWines();\n    }, []);\n\n    // useEffect(() => {\n    //     const fetchVineyards = async () => {\n    //         const vineyardData = await getAllVineyards();\n    //         setVineyards(vineyardData);\n    //     }\n    //     fetchVineyards();\n    // }, []);\n\n    const handleCreate = async (wineData) => {\n        const newWine = await postWine(wineData);\n        setWines(prevState => [...prevState, newWine])\n        history.push('/user')\n    }\n\n    const handleDelete = async (id) => {\n        await deleteWine(id);\n        setWines(prevState => prevState.filter(wineItem => {\n            return wineItem.id !== id\n        }))\n    }\n\n    const handleUpdate = async (id, wineData) => {\n        const updatedWine = await putWine(id, wineData);\n        setWines(prevState => prevState.map(wineItem => {\n            return wineItem.id === Number(id) ? updatedWine : wineItem\n        }))\n        history.push('/user')\n    }\n\n    return (\n       <Switch>\n           <Route path='/wines'>\n               <Wines\n                wines={wines}\n                />\n           </Route>\n           <Route path='/wines/:id/edit'>\n               <EditWine\n               wines={wines}\n               handleUpdate={handleUpdate}\n               />\n           </Route>\n           <Route path='/wines/:id'>\n               <WineDetail\n                wines={wines}\n                />\n           </Route>\n           <Route path='/wines/new'>\n               <CreateWine\n               handleCreate={handleCreate}\n               />\n           </Route>\n           <Route path='/user'>\n               <ProfilePage\n               wines={wines}\n               handleDelete={handleDelete}\n               currentUser={currentUser}\n               />\n           </Route>\n       </Switch>\n    )\n}\n"]},"metadata":{},"sourceType":"module"}