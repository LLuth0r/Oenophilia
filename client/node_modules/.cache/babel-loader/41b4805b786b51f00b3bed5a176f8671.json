{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/home/pak/Documents/General_Assembly/Unit_4/P4/The-Cellar/client/src/containers/MainContainer.jsx\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport { useEffect, useState } from 'react';\nimport { Switch, Route, useHistory } from 'react-router-dom';\nimport CreateWine from '../screens/CreateWine/CreateWine';\nimport Wines from '../screens/Wines/Wines';\nimport WineDetail from '../screens/WineDetail/WineDetail';\nimport EditWine from '../screens/EditWine/EditWine';\nimport ProfilePage from '../screens/ProfilePage/ProfilePage';\nimport { getAllWines, postWine, putWine, deleteWine, getOneWine } from '../services/wines';\nimport { getAllVineyards, postVineyard, putVineyard, deleteVineyard, getOneVineyard } from '../services/vineyards';\nimport Header from '../layouts/Header/Header';\nexport default function MainContainer(props) {\n  _s();\n\n  const [wines, setWines] = useState([]);\n  const [vineyards, setVineyards] = useState([]);\n  const history = useHistory();\n  const {\n    currentUser\n  } = props;\n  useEffect(() => {\n    const fetchWines = async () => {\n      const wineData = await getAllWines();\n      setWines(wineData);\n    };\n\n    fetchWines();\n  }, []);\n  useEffect(() => {\n    const fetchVineyards = async () => {\n      const vineyardData = await getAllVineyards();\n      setVineyards(vineyardData);\n    };\n\n    fetchVineyards();\n  }, []);\n\n  const handleCreate = async wineData => {\n    const newWine = await postWine(wineData);\n    setWines(prevState => [...prevState, newWine]);\n    history.push('/user');\n  };\n\n  const handleDelete = async id => {\n    await deleteWine(id);\n    setWines(prevState => prevState.filter(wineItem => {\n      return wineItem.id !== id;\n    }));\n  };\n\n  const handleUpdate = async (id, wineData) => {\n    const updatedWine = await putWine(id, wineData);\n    setWines(prevState => prevState.map(wineItem => {\n      return wineItem.id === Number(id) ? updatedWine : wineItem;\n    }));\n    history.push('/user');\n  };\n\n  const handleCreateVineyard = async vineyardData => {\n    const newVineyard = await postWine(vineyardData);\n    setWines(prevState => [...prevState, newVineyard]);\n    history.push('/user');\n  };\n\n  const handleDeleteVineyard = async id => {\n    await deleteVineyard(id);\n    setVineyards(prevState => prevState.filter(vineyardItem => {\n      return vineyardItem.id !== id;\n    }));\n  };\n\n  const handleUpdateVineyard = async (id, vineyardData) => {\n    const updatedWine = await putWine(id, wineData);\n    setWines(prevState => prevState.map(wineItem => {\n      return wineItem.id === Number(id) ? updatedWine : wineItem;\n    }));\n    history.push('/user');\n  };\n\n  return /*#__PURE__*/_jsxDEV(Switch, {\n    children: [/*#__PURE__*/_jsxDEV(Route, {\n      exact: true,\n      path: \"/wines\",\n      children: /*#__PURE__*/_jsxDEV(Wines, {\n        wines: wines\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 16\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 12\n    }, this), /*#__PURE__*/_jsxDEV(Route, {\n      path: \"/wine/:id/edit\",\n      children: /*#__PURE__*/_jsxDEV(EditWine, {\n        wines: wines,\n        handleUpdate: handleUpdate\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 16\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 12\n    }, this), /*#__PURE__*/_jsxDEV(Route, {\n      path: \"/wine/:id\",\n      children: /*#__PURE__*/_jsxDEV(WineDetail, {\n        wines: wines\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 16\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 12\n    }, this), /*#__PURE__*/_jsxDEV(Route, {\n      exact: true,\n      path: \"/wines/add\",\n      children: /*#__PURE__*/_jsxDEV(CreateWine, {\n        handleCreate: handleCreate,\n        currentUser: currentUser\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 16\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 12\n    }, this), /*#__PURE__*/_jsxDEV(Route, {\n      exact: true,\n      path: \"/profile\",\n      children: /*#__PURE__*/_jsxDEV(ProfilePage, {\n        wines: wines,\n        handleDelete: handleDelete,\n        currentUser: currentUser\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 16\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 12\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 78,\n    columnNumber: 8\n  }, this);\n}\n\n_s(MainContainer, \"o21NrJv8syNUBWnm11tBRAwKTLQ=\", false, function () {\n  return [useHistory];\n});\n\n_c = MainContainer;\n\nvar _c;\n\n$RefreshReg$(_c, \"MainContainer\");","map":{"version":3,"sources":["/home/pak/Documents/General_Assembly/Unit_4/P4/The-Cellar/client/src/containers/MainContainer.jsx"],"names":["React","useEffect","useState","Switch","Route","useHistory","CreateWine","Wines","WineDetail","EditWine","ProfilePage","getAllWines","postWine","putWine","deleteWine","getOneWine","getAllVineyards","postVineyard","putVineyard","deleteVineyard","getOneVineyard","Header","MainContainer","props","wines","setWines","vineyards","setVineyards","history","currentUser","fetchWines","wineData","fetchVineyards","vineyardData","handleCreate","newWine","prevState","push","handleDelete","id","filter","wineItem","handleUpdate","updatedWine","map","Number","handleCreateVineyard","newVineyard","handleDeleteVineyard","vineyardItem","handleUpdateVineyard"],"mappings":"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","sourcesContent":["import React from 'react'\nimport {useEffect, useState} from 'react';\nimport {Switch, Route, useHistory} from 'react-router-dom';\nimport CreateWine from '../screens/CreateWine/CreateWine';\nimport Wines from '../screens/Wines/Wines';\nimport WineDetail from '../screens/WineDetail/WineDetail';\nimport EditWine from '../screens/EditWine/EditWine';\nimport ProfilePage from '../screens/ProfilePage/ProfilePage';\nimport {getAllWines, postWine, putWine, deleteWine, getOneWine } from '../services/wines';\nimport {getAllVineyards, postVineyard, putVineyard, deleteVineyard, getOneVineyard } from '../services/vineyards';\nimport Header from '../layouts/Header/Header';\n\nexport default function MainContainer(props) {\n    const [wines, setWines] = useState([]);\n    const [vineyards, setVineyards] = useState([]);\n    const history = useHistory();\n    const {currentUser} = props;\n\n    useEffect(() => {\n        const fetchWines = async () => {\n            const wineData = await getAllWines();\n            setWines(wineData)\n        }\n        fetchWines();\n    }, []);\n\n    useEffect(() => {\n        const fetchVineyards = async () => {\n            const vineyardData = await getAllVineyards();\n            setVineyards(vineyardData);\n        }\n        fetchVineyards();\n    }, []);\n\n    const handleCreate = async (wineData) => {\n        const newWine = await postWine(wineData);\n        setWines(prevState => [...prevState, newWine])\n        history.push('/user')\n    }\n\n    const handleDelete = async (id) => {\n        await deleteWine(id);\n        setWines(prevState => prevState.filter(wineItem => {\n            return wineItem.id !== id\n        }))\n    }\n\n    const handleUpdate = async (id, wineData) => {\n        const updatedWine = await putWine(id, wineData);\n        setWines(prevState => prevState.map(wineItem => {\n            return wineItem.id === Number(id) ? updatedWine : wineItem\n        }))\n        history.push('/user')\n    }\n\n    const handleCreateVineyard = async (vineyardData) => {\n        const newVineyard = await postWine(vineyardData);\n        setWines(prevState => [...prevState, newVineyard])\n        history.push('/user')\n    }\n\n    const handleDeleteVineyard = async (id) => {\n        await deleteVineyard(id);\n        setVineyards(prevState => prevState.filter(vineyardItem => {\n            return vineyardItem.id !== id\n        }))\n    }\n\n    const handleUpdateVineyard = async (id, vineyardData) => {\n        const updatedWine = await putWine(id, wineData);\n        setWines(prevState => prevState.map(wineItem => {\n            return wineItem.id === Number(id) ? updatedWine : wineItem\n        }))\n        history.push('/user')\n    }\n\n    return (\n       <Switch>\n           <Route exact path='/wines'>\n               <Wines\n                wines={wines}\n                />\n           </Route>\n           <Route path='/wine/:id/edit'>\n               <EditWine\n               wines={wines}\n               handleUpdate={handleUpdate}\n               />\n           </Route>\n           <Route path='/wine/:id'>\n               <WineDetail\n                wines={wines}\n                />\n           </Route>\n           <Route exact path='/wines/add'>\n               <CreateWine\n               handleCreate={handleCreate}\n               currentUser={currentUser}\n               />\n           </Route>\n           <Route exact path='/profile'>\n               <ProfilePage\n               wines={wines}\n               handleDelete={handleDelete}\n               currentUser={currentUser}\n               />\n           </Route>\n       </Switch>\n    )\n}\n"]},"metadata":{},"sourceType":"module"}