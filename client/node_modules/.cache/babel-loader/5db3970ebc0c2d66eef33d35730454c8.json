{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/home/pak/Documents/General_Assembly/Unit_4/P4/The-Cellar/client/src/containers/MainContainer.jsx\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport { useEffect, useState } from 'react';\nimport { Switch, Route, useHistory } from 'react-router-dom';\nimport CreateWine from '../screens/CreateWine/CreateWine';\nexport default function MainContainer(props) {\n  _s();\n\n  const [wines, setWines] = useState([]);\n  const [vineyards, setVineyards] = useState([]);\n  const history = useHistory();\n  const {\n    currentUser\n  } = props;\n  useEffect(() => {\n    const fetchWines = async () => {\n      const wineData = await getAllWines();\n      setWines(wineData);\n    };\n\n    fetchWines();\n  }, []);\n  useEffect(() => {\n    const fetchVineyards = async () => {\n      const vineyardData = await getAllVineyards();\n      setVineyards(vineyardData);\n    };\n\n    fetchVineyards();\n  }, []);\n\n  const handleCreate = async wineData => {\n    const newWine = await postWine(wineData);\n    setWines(prevState => [...prevState, newWine]);\n    history.push('/user');\n  };\n\n  const handleDelete = async id => {\n    await deleteWine(id);\n    setWines(prevState => prevState.filter(wineItem => {\n      return wineItem.id !== id;\n    }));\n  };\n\n  const handleUpdate = async (id, wineData) => {\n    const updatedWine = await putWine(id, wineData);\n    setWines(prevState => prevState.map(wineItem => {\n      return wineItem.id === Number(id) ? updatedWine : wineItem;\n    }));\n    history.push('/user');\n  };\n\n  return /*#__PURE__*/_jsxDEV(Switch, {\n    children: [/*#__PURE__*/_jsxDEV(Route, {\n      path: \"/wines\",\n      children: /*#__PURE__*/_jsxDEV(Wines, {\n        wines: wines\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 16\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 12\n    }, this), /*#__PURE__*/_jsxDEV(Route, {\n      path: \"/wines/:id/edit\",\n      children: /*#__PURE__*/_jsxDEV(EditWine, {\n        wines: wines,\n        handleUpdate: handleUpdate\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 16\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 12\n    }, this), /*#__PURE__*/_jsxDEV(Route, {\n      path: \"/wines/:id\",\n      children: /*#__PURE__*/_jsxDEV(WineDetail, {\n        wines: wines\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 16\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 12\n    }, this), /*#__PURE__*/_jsxDEV(Route, {\n      path: \"/wines/new\",\n      children: /*#__PURE__*/_jsxDEV(CreateWine, {\n        handleCreate: handleCreate\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 16\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 12\n    }, this), /*#__PURE__*/_jsxDEV(Route, {\n      path: \"/user\",\n      children: /*#__PURE__*/_jsxDEV(User, {\n        wines: wines,\n        handleDelete: handleDelete,\n        currentUser: currentUser\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 16\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 12\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 51,\n    columnNumber: 8\n  }, this);\n}\n\n_s(MainContainer, \"o21NrJv8syNUBWnm11tBRAwKTLQ=\", false, function () {\n  return [useHistory];\n});\n\n_c = MainContainer;\n\nvar _c;\n\n$RefreshReg$(_c, \"MainContainer\");","map":{"version":3,"sources":["/home/pak/Documents/General_Assembly/Unit_4/P4/The-Cellar/client/src/containers/MainContainer.jsx"],"names":["React","useEffect","useState","Switch","Route","useHistory","CreateWine","MainContainer","props","wines","setWines","vineyards","setVineyards","history","currentUser","fetchWines","wineData","getAllWines","fetchVineyards","vineyardData","getAllVineyards","handleCreate","newWine","postWine","prevState","push","handleDelete","id","deleteWine","filter","wineItem","handleUpdate","updatedWine","putWine","map","Number"],"mappings":"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","sourcesContent":["import React from 'react'\nimport {useEffect, useState} from 'react';\nimport {Switch, Route, useHistory} from 'react-router-dom';\nimport CreateWine from '../screens/CreateWine/CreateWine';\n\n\nexport default function MainContainer(props) {\n    const [wines, setWines] = useState([]);\n    const [vineyards, setVineyards] = useState([]);\n    const history = useHistory();\n    const {currentUser} = props;\n\n    useEffect(() => {\n        const fetchWines = async () => {\n            const wineData = await getAllWines();\n            setWines(wineData)\n        }\n        fetchWines();\n    }, []);\n\n    useEffect(() => {\n        const fetchVineyards = async () => {\n            const vineyardData = await getAllVineyards();\n            setVineyards(vineyardData);\n        }\n        fetchVineyards();\n    }, []);\n\n    const handleCreate = async (wineData) => {\n        const newWine = await postWine(wineData);\n        setWines(prevState => [...prevState, newWine])\n        history.push('/user')\n    }\n\n    const handleDelete = async (id) => {\n        await deleteWine(id);\n        setWines(prevState => prevState.filter(wineItem => {\n            return wineItem.id !== id\n        }))\n    }\n\n    const handleUpdate = async (id, wineData) => {\n        const updatedWine = await putWine(id, wineData);\n        setWines(prevState => prevState.map(wineItem => {\n            return wineItem.id === Number(id) ? updatedWine : wineItem\n        }))\n        history.push('/user')\n    }\n\n    return (\n       <Switch>\n           <Route path='/wines'>\n               <Wines\n                wines={wines}\n                />\n           </Route>\n           <Route path='/wines/:id/edit'>\n               <EditWine\n               wines={wines}\n               handleUpdate={handleUpdate}\n               />\n           </Route>\n           <Route path='/wines/:id'>\n               <WineDetail\n                wines={wines}\n                />\n           </Route>\n           <Route path='/wines/new'>\n               <CreateWine\n               handleCreate={handleCreate}\n               />\n           </Route>\n           <Route path='/user'>\n               <User\n               wines={wines}\n               handleDelete={handleDelete}\n               currentUser={currentUser}\n               />\n           </Route>\n       </Switch>\n    )\n}\n"]},"metadata":{},"sourceType":"module"}